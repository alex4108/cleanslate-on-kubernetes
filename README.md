# cleanslate on Kubernetes

Manifests for cleanslate on Homelab cluster

## Prepare to deploy

### Set env vars for template

```
export DOCKER_USER="" # example: me
export DOCKER_REPO="" # example: cleanslate
export DOMAIN_NAME="" # example: cleanslate.me.com
```

### Login to dockerhub (or other registry) if not already

`docker login`

## Security considerations

### The build includes your domain name?

For this reason, recommend using a private registry/repo!

### Firebase is disabled

The recommendation from maintainers is to use Firebase for authentication.

This instance is guarded by SSO Proxy IN MY CLUSTER, so Firebase is disabled here.

**Proceed with caution!!!**

### Secrets regeneration

When you run `./build.sh`, secrets are generated by OpenSSL for the first run.

Retain the manifest.yml to automatically inject the existing secrets to `./build.sh`

## Deploy it

```
# pip3 install yq jq
./build.sh
./run.sh
```
